import time
import requests

# Number of requests to make
N = 10

# URL for the API you want to test
url = 'https://jsonplaceholder.typicode.com/todos/1'

# Without persistent connection
start_time = time.time()
for _ in range(N):
    response = requests.get(url)
    # Process the response as needed
end_time = time.time()
print(f"Without persistent connection - Total time: {end_time - start_time:.4f} seconds")

# With persistent connection
session = requests.Session()
start_time = time.time()
for _ in range(N):
    response = session.get(url)
    # Process the response as needed
end_time = time.time()
print(f"With persistent connection - Total time: {end_time - start_time:.4f} seconds")

# Close the session when done
session.close()



import time
import httpx

# Number of requests to make
N = 10

# URL for the API you want to test
url = 'https://jsonplaceholder.typicode.com/todos/1'

# Without persistent connection
start_time = time.time()
for _ in range(N):
    with httpx.Client() as client:
        response = client.get(url)
    # Process the response as needed
end_time = time.time()
print(f"Without persistent connection - Total time: {end_time - start_time:.4f} seconds")

# With persistent connection
client = httpx.Client()
start_time = time.time()
for _ in range(N):
    response = client.get(url)
    # Process the response as needed
end_time = time.time()
print(f"With persistent connection - Total time: {end_time - start_time:.4f} seconds")

# Close the client when done
client.close()
